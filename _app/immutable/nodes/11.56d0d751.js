import{s as ue,f as c,a as j,l as K,g as u,h as E,c as w,v as X,d,m as Q,j as i,i as S,y as o,I as ge,z as ce,G as Y,D as Ce,E as je,o as we,e as ke}from"../chunks/scheduler.380c08c3.js";import{S as fe,i as de,b as Z,d as ee,m as te,a as A,t as H,e as ae,g as Te,c as De}from"../chunks/index.baeac5c0.js";import{C as Le}from"../chunks/Content.1268ef0d.js";import{P as Re}from"../chunks/PageHeader.461dae71.js";import{e as Ee}from"../chunks/width.6ae85fba.js";function ye(r,e,n){const t=r.slice();return t[7]=e[n],t}function $e(r){let e,n;return{c(){e=c("input"),this.h()},l(t){e=u(t,"INPUT",{type:!0,name:!0}),this.h()},h(){i(e,"type","hidden"),i(e,"name","notify"),e.value=n=r[7]},m(t,a){S(t,e,a)},p(t,a){a&4&&n!==(n=t[7])&&(e.value=n)},d(t){t&&d(e)}}}function Pe(r){let e,n,t,a,s,m="Subject",b,_,g,l,f,k,P="Message",O,D,I,C,y,T,L,B="Terms and Conditions",F,V,R,N,ne,le,z,M,U,se,W,re,he,x=Ee(r[2]),$=[];for(let h=0;h<x.length;h+=1)$[h]=$e(ye(r,x,h));return{c(){e=c("form"),n=c("input"),t=j(),a=c("div"),s=c("label"),s.textContent=m,b=j(),_=c("div"),g=c("input"),l=j(),f=c("div"),k=c("label"),k.textContent=P,O=j(),D=c("div"),I=c("textarea"),C=j();for(let h=0;h<$.length;h+=1)$[h].c();y=j(),T=c("div"),L=c("label"),L.textContent=B,F=j(),V=c("div"),R=c("label"),N=c("input"),ne=K(`
                I have discussed this response with all relevant recipients of the
                original feedback (as well as members of the Exec, should you have
                any concerns about the original feedback or how to respond).`),le=j(),z=c("div"),M=c("div"),U=c("button"),se=K("Login & Submit"),this.h()},l(h){e=u(h,"FORM",{action:!0,method:!0});var p=E(e);n=u(p,"INPUT",{type:!0,name:!0}),t=w(p),a=u(p,"DIV",{class:!0});var v=E(a);s=u(v,"LABEL",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-z86zjv"&&(s.textContent=m),b=w(v),_=u(v,"DIV",{class:!0});var J=E(_);g=u(J,"INPUT",{name:!0,class:!0,type:!0}),J.forEach(d),v.forEach(d),l=w(p),f=u(p,"DIV",{class:!0});var q=E(f);k=u(q,"LABEL",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-j07oxo"&&(k.textContent=P),O=w(q),D=u(q,"DIV",{class:!0});var me=E(D);I=u(me,"TEXTAREA",{name:!0,class:!0,placeholder:!0}),E(I).forEach(d),me.forEach(d),q.forEach(d),C=w(p);for(let ie=0;ie<$.length;ie+=1)$[ie].l(p);y=w(p),T=u(p,"DIV",{class:!0});var G=E(T);L=u(G,"LABEL",{class:!0,"data-svelte-h":!0}),X(L)!=="svelte-12mc2lj"&&(L.textContent=B),F=w(G),V=u(G,"DIV",{class:!0});var pe=E(V);R=u(pe,"LABEL",{class:!0});var oe=E(R);N=u(oe,"INPUT",{name:!0,type:!0}),ne=Q(oe,`
                I have discussed this response with all relevant recipients of the
                original feedback (as well as members of the Exec, should you have
                any concerns about the original feedback or how to respond).`),oe.forEach(d),pe.forEach(d),G.forEach(d),le=w(p),z=u(p,"DIV",{class:!0});var ve=E(z);M=u(ve,"DIV",{class:!0});var be=E(M);U=u(be,"BUTTON",{class:!0});var _e=E(U);se=Q(_e,"Login & Submit"),_e.forEach(d),be.forEach(d),ve.forEach(d),p.forEach(d),this.h()},h(){i(n,"type","hidden"),i(n,"name","recipient"),n.value=r[1],i(s,"class","label"),g.value=r[0],i(g,"name","subject"),i(g,"class","input"),i(g,"type","text"),g.readOnly=!0,i(_,"class","control"),i(a,"class","field"),i(k,"class","label"),i(I,"name","message"),i(I,"class","textarea"),i(I,"placeholder","e.g. Thanks for letting us know about..."),i(D,"class","control"),i(f,"class","field"),i(L,"class","label"),i(N,"name","agreed"),i(N,"type","checkbox"),i(R,"class","checkbox"),i(V,"class","control"),i(T,"class","field"),i(U,"class","button is-link"),U.disabled=W=!r[4]||r[3].length==0,i(M,"class","control"),i(z,"class","field mt-5"),i(e,"action","https://members.thejcr.co.uk/api/feedback/respond"),i(e,"method","POST")},m(h,p){S(h,e,p),o(e,n),o(e,t),o(e,a),o(a,s),o(a,b),o(a,_),o(_,g),o(e,l),o(e,f),o(f,k),o(f,O),o(f,D),o(D,I),ge(I,r[3]),o(e,C);for(let v=0;v<$.length;v+=1)$[v]&&$[v].m(e,null);o(e,y),o(e,T),o(T,L),o(T,F),o(T,V),o(V,R),o(R,N),N.checked=r[4],o(R,ne),o(e,le),o(e,z),o(z,M),o(M,U),o(U,se),re||(he=[ce(I,"input",r[5]),ce(N,"change",r[6])],re=!0)},p(h,[p]){if(p&2&&(n.value=h[1]),p&1&&g.value!==h[0]&&(g.value=h[0]),p&8&&ge(I,h[3]),p&4){x=Ee(h[2]);let v;for(v=0;v<x.length;v+=1){const J=ye(h,x,v);$[v]?$[v].p(J,p):($[v]=$e(J),$[v].c(),$[v].m(e,y))}for(;v<$.length;v+=1)$[v].d(1);$.length=x.length}p&16&&(N.checked=h[4]),p&24&&W!==(W=!h[4]||h[3].length==0)&&(U.disabled=W)},i:Y,o:Y,d(h){h&&d(e),Ce($,h),re=!1,je(he)}}}function Ve(r,e,n){let{subject:t}=e,{recipient:a}=e,{notify:s}=e,m="",b=!1;function _(){m=this.value,n(3,m)}function g(){b=this.checked,n(4,b)}return r.$$set=l=>{"subject"in l&&n(0,t=l.subject),"recipient"in l&&n(1,a=l.recipient),"notify"in l&&n(2,s=l.notify)},[t,a,s,m,b,_,g]}class Se extends fe{constructor(e){super(),de(this,e,Ve,Pe,ue,{subject:0,recipient:1,notify:2})}}function Oe(r){let e,n,t,a,s,m,b,_,g,l,f,k,P,O,D,I;return{c(){e=c("form"),n=c("input"),t=j(),a=c("div"),s=c("div"),m=c("label"),b=c("input"),_=K(`
                I have discussed this action with all relevant recipients of the
                original feedback, as well as both the Exec and the Webmaster. I
                agree that any member of the JCR Committee may be alerted of this
                action.`),g=j(),l=c("div"),f=c("div"),k=c("button"),P=K("Reveal Original Sender"),this.h()},l(C){e=u(C,"FORM",{action:!0,method:!0});var y=E(e);n=u(y,"INPUT",{type:!0,name:!0}),t=w(y),a=u(y,"DIV",{class:!0});var T=E(a);s=u(T,"DIV",{class:!0});var L=E(s);m=u(L,"LABEL",{class:!0});var B=E(m);b=u(B,"INPUT",{name:!0,type:!0}),_=Q(B,`
                I have discussed this action with all relevant recipients of the
                original feedback, as well as both the Exec and the Webmaster. I
                agree that any member of the JCR Committee may be alerted of this
                action.`),B.forEach(d),L.forEach(d),T.forEach(d),g=w(y),l=u(y,"DIV",{class:!0});var F=E(l);f=u(F,"DIV",{class:!0});var V=E(f);k=u(V,"BUTTON",{class:!0});var R=E(k);P=Q(R,"Reveal Original Sender"),R.forEach(d),V.forEach(d),F.forEach(d),y.forEach(d),this.h()},h(){i(n,"type","hidden"),i(n,"name","encrypted"),n.value=r[0],i(b,"name","agreed"),i(b,"type","checkbox"),i(m,"class","checkbox"),i(s,"class","control"),i(a,"class","field"),i(k,"class","button is-danger"),k.disabled=O=!r[1],i(f,"class","control"),i(l,"class","field mt-5"),i(e,"action","https://members.thejcr.co.uk/api/feedback/reveal"),i(e,"method","POST")},m(C,y){S(C,e,y),o(e,n),o(e,t),o(e,a),o(a,s),o(s,m),o(m,b),b.checked=r[1],o(m,_),o(e,g),o(e,l),o(l,f),o(f,k),o(k,P),D||(I=ce(b,"change",r[2]),D=!0)},p(C,[y]){y&1&&(n.value=C[0]),y&2&&(b.checked=C[1]),y&2&&O!==(O=!C[1])&&(k.disabled=O)},i:Y,o:Y,d(C){C&&d(e),D=!1,I()}}}function Ne(r,e,n){let{encrypted:t}=e,a=!1;function s(){a=this.checked,n(1,a)}return r.$$set=m=>{"encrypted"in m&&n(0,t=m.encrypted)},[t,a,s]}class Ue extends fe{constructor(e){super(),de(this,e,Ne,Oe,ue,{encrypted:0})}}function Ie(r){let e,n,t,a,s,m="Reveal Original Sender",b,_,g;return e=new Se({props:{subject:r[1],recipient:r[0],notify:r[2]}}),_=new Ue({props:{encrypted:r[0]}}),{c(){Z(e.$$.fragment),n=j(),t=c("br"),a=j(),s=c("h2"),s.textContent=m,b=j(),Z(_.$$.fragment)},l(l){ee(e.$$.fragment,l),n=w(l),t=u(l,"BR",{}),a=w(l),s=u(l,"H2",{"data-svelte-h":!0}),X(s)!=="svelte-1i6669j"&&(s.textContent=m),b=w(l),ee(_.$$.fragment,l)},m(l,f){te(e,l,f),S(l,n,f),S(l,t,f),S(l,a,f),S(l,s,f),S(l,b,f),te(_,l,f),g=!0},p(l,f){const k={};f&2&&(k.subject=l[1]),f&1&&(k.recipient=l[0]),f&4&&(k.notify=l[2]),e.$set(k);const P={};f&1&&(P.encrypted=l[0]),_.$set(P)},i(l){g||(A(e.$$.fragment,l),A(_.$$.fragment,l),g=!0)},o(l){H(e.$$.fragment,l),H(_.$$.fragment,l),g=!1},d(l){l&&(d(n),d(t),d(a),d(s),d(b)),ae(e,l),ae(_,l)}}}function Ae(r){let e,n,t=r[0]&&r[1]&&Ie(r);return{c(){t&&t.c(),e=ke()},l(a){t&&t.l(a),e=ke()},m(a,s){t&&t.m(a,s),S(a,e,s),n=!0},p(a,s){a[0]&&a[1]?t?(t.p(a,s),s&3&&A(t,1)):(t=Ie(a),t.c(),A(t,1),t.m(e.parentNode,e)):t&&(Te(),H(t,1,1,()=>{t=null}),De())},i(a){n||(A(t),n=!0)},o(a){H(t),n=!1},d(a){a&&d(e),t&&t.d(a)}}}function Be(r){let e,n;return e=new Le({props:{$$slots:{default:[Ae]},$$scope:{ctx:r}}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),n=!0},p(t,a){const s={};a&15&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(A(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Fe(r){let e,n;return e=new Re({props:{current:"/get-involved/feedback/respond",title:"Feedback Response",size:"small",metaDescription:"",$$slots:{default:[Be]},$$scope:{ctx:r}}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),n=!0},p(t,[a]){const s={};a&15&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(A(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function ze(r,e,n){let t,a,s;return we(()=>{const m=new URLSearchParams(document.location.search);n(0,t=m.get("recipient")),n(1,a=m.get("subject")),n(2,s=m.getAll("notify"))}),[t,a,s]}class qe extends fe{constructor(e){super(),de(this,e,ze,Fe,ue,{})}}export{qe as component};
