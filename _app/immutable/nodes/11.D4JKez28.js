import{s as ue,e as c,a as j,t as K,c as u,b as y,g as w,m as X,f as d,d as Q,l as i,i as S,h as o,B as ge,A as ce,n as Y,F as Ce,y as je,v as we,G as ke}from"../chunks/scheduler.C71OaRi2.js";import{S as fe,i as de,c as Z,a as ee,m as te,t as N,b as H,d as ae,g as Te,e as De}from"../chunks/index.B0WcMPO7.js";import{C as Le}from"../chunks/Content.ChI0xTl5.js";import{P as Re}from"../chunks/PageHeader.CNwbfCz5.js";import{e as ye}from"../chunks/width.BfzdoN9z.js";function Ee(r,e,n){const t=r.slice();return t[7]=e[n],t}function $e(r){let e,n;return{c(){e=c("input"),this.h()},l(t){e=u(t,"INPUT",{type:!0,name:!0}),this.h()},h(){i(e,"type","hidden"),i(e,"name","notify"),e.value=n=r[7]},m(t,a){S(t,e,a)},p(t,a){a&4&&n!==(n=t[7])&&(e.value=n)},d(t){t&&d(e)}}}function Pe(r){let e,n,t,a,s,m="Subject",b,_,g,l,f,k,P="Message",O,D,I,C,E,T,L,U="Terms and Conditions",F,V,R,A,ne,le,M,z,B,se,W,re,he,x=ye(r[2]),$=[];for(let h=0;h<x.length;h+=1)$[h]=$e(Ee(r,x,h));return{c(){e=c("form"),n=c("input"),t=j(),a=c("div"),s=c("label"),s.textContent=m,b=j(),_=c("div"),g=c("input"),l=j(),f=c("div"),k=c("label"),k.textContent=P,O=j(),D=c("div"),I=c("textarea"),C=j();for(let h=0;h<$.length;h+=1)$[h].c();E=j(),T=c("div"),L=c("label"),L.textContent=U,F=j(),V=c("div"),R=c("label"),A=c("input"),ne=K(`
                I have discussed this response with all relevant recipients of the
                original feedback (as well as members of the Exec, should you have
                any concerns about the original feedback or how to respond).`),le=j(),M=c("div"),z=c("div"),B=c("button"),se=K("Login & Submit"),this.h()},l(h){e=u(h,"FORM",{action:!0,method:!0});var p=y(e);n=u(p,"INPUT",{type:!0,name:!0}),t=w(p),a=u(p,"DIV",{class:!0});var v=y(a);s=u(v,"LABEL",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-z86zjv"&&(s.textContent=m),b=w(v),_=u(v,"DIV",{class:!0});var J=y(_);g=u(J,"INPUT",{name:!0,class:!0,type:!0}),J.forEach(d),v.forEach(d),l=w(p),f=u(p,"DIV",{class:!0});var q=y(f);k=u(q,"LABEL",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-j07oxo"&&(k.textContent=P),O=w(q),D=u(q,"DIV",{class:!0});var me=y(D);I=u(me,"TEXTAREA",{name:!0,class:!0,placeholder:!0}),y(I).forEach(d),me.forEach(d),q.forEach(d),C=w(p);for(let ie=0;ie<$.length;ie+=1)$[ie].l(p);E=w(p),T=u(p,"DIV",{class:!0});var G=y(T);L=u(G,"LABEL",{class:!0,"data-svelte-h":!0}),X(L)!=="svelte-12mc2lj"&&(L.textContent=U),F=w(G),V=u(G,"DIV",{class:!0});var pe=y(V);R=u(pe,"LABEL",{class:!0});var oe=y(R);A=u(oe,"INPUT",{name:!0,type:!0}),ne=Q(oe,`
                I have discussed this response with all relevant recipients of the
                original feedback (as well as members of the Exec, should you have
                any concerns about the original feedback or how to respond).`),oe.forEach(d),pe.forEach(d),G.forEach(d),le=w(p),M=u(p,"DIV",{class:!0});var ve=y(M);z=u(ve,"DIV",{class:!0});var be=y(z);B=u(be,"BUTTON",{class:!0});var _e=y(B);se=Q(_e,"Login & Submit"),_e.forEach(d),be.forEach(d),ve.forEach(d),p.forEach(d),this.h()},h(){i(n,"type","hidden"),i(n,"name","recipient"),n.value=r[1],i(s,"class","label"),g.value=r[0],i(g,"name","subject"),i(g,"class","input"),i(g,"type","text"),g.readOnly=!0,i(_,"class","control"),i(a,"class","field"),i(k,"class","label"),i(I,"name","message"),i(I,"class","textarea"),i(I,"placeholder","e.g. Thanks for letting us know about..."),i(D,"class","control"),i(f,"class","field"),i(L,"class","label"),i(A,"name","agreed"),i(A,"type","checkbox"),i(R,"class","checkbox"),i(V,"class","control"),i(T,"class","field"),i(B,"class","button is-link"),B.disabled=W=!r[4]||r[3].length==0,i(z,"class","control"),i(M,"class","field mt-5"),i(e,"action","https://members.thejcr.co.uk/api/feedback/respond"),i(e,"method","POST")},m(h,p){S(h,e,p),o(e,n),o(e,t),o(e,a),o(a,s),o(a,b),o(a,_),o(_,g),o(e,l),o(e,f),o(f,k),o(f,O),o(f,D),o(D,I),ge(I,r[3]),o(e,C);for(let v=0;v<$.length;v+=1)$[v]&&$[v].m(e,null);o(e,E),o(e,T),o(T,L),o(T,F),o(T,V),o(V,R),o(R,A),A.checked=r[4],o(R,ne),o(e,le),o(e,M),o(M,z),o(z,B),o(B,se),re||(he=[ce(I,"input",r[5]),ce(A,"change",r[6])],re=!0)},p(h,[p]){if(p&2&&(n.value=h[1]),p&1&&g.value!==h[0]&&(g.value=h[0]),p&8&&ge(I,h[3]),p&4){x=ye(h[2]);let v;for(v=0;v<x.length;v+=1){const J=Ee(h,x,v);$[v]?$[v].p(J,p):($[v]=$e(J),$[v].c(),$[v].m(e,E))}for(;v<$.length;v+=1)$[v].d(1);$.length=x.length}p&16&&(A.checked=h[4]),p&24&&W!==(W=!h[4]||h[3].length==0)&&(B.disabled=W)},i:Y,o:Y,d(h){h&&d(e),Ce($,h),re=!1,je(he)}}}function Ve(r,e,n){let{subject:t}=e,{recipient:a}=e,{notify:s}=e,m="",b=!1;function _(){m=this.value,n(3,m)}function g(){b=this.checked,n(4,b)}return r.$$set=l=>{"subject"in l&&n(0,t=l.subject),"recipient"in l&&n(1,a=l.recipient),"notify"in l&&n(2,s=l.notify)},[t,a,s,m,b,_,g]}class Se extends fe{constructor(e){super(),de(this,e,Ve,Pe,ue,{subject:0,recipient:1,notify:2})}}function Oe(r){let e,n,t,a,s,m,b,_,g,l,f,k,P,O,D,I;return{c(){e=c("form"),n=c("input"),t=j(),a=c("div"),s=c("div"),m=c("label"),b=c("input"),_=K(`
                I have discussed this action with all relevant recipients of the
                original feedback, as well as both the Exec and the Webmaster. I
                agree that any member of the JCR Committee may be alerted of this
                action.`),g=j(),l=c("div"),f=c("div"),k=c("button"),P=K("Reveal Original Sender"),this.h()},l(C){e=u(C,"FORM",{action:!0,method:!0});var E=y(e);n=u(E,"INPUT",{type:!0,name:!0}),t=w(E),a=u(E,"DIV",{class:!0});var T=y(a);s=u(T,"DIV",{class:!0});var L=y(s);m=u(L,"LABEL",{class:!0});var U=y(m);b=u(U,"INPUT",{name:!0,type:!0}),_=Q(U,`
                I have discussed this action with all relevant recipients of the
                original feedback, as well as both the Exec and the Webmaster. I
                agree that any member of the JCR Committee may be alerted of this
                action.`),U.forEach(d),L.forEach(d),T.forEach(d),g=w(E),l=u(E,"DIV",{class:!0});var F=y(l);f=u(F,"DIV",{class:!0});var V=y(f);k=u(V,"BUTTON",{class:!0});var R=y(k);P=Q(R,"Reveal Original Sender"),R.forEach(d),V.forEach(d),F.forEach(d),E.forEach(d),this.h()},h(){i(n,"type","hidden"),i(n,"name","encrypted"),n.value=r[0],i(b,"name","agreed"),i(b,"type","checkbox"),i(m,"class","checkbox"),i(s,"class","control"),i(a,"class","field"),i(k,"class","button is-danger"),k.disabled=O=!r[1],i(f,"class","control"),i(l,"class","field mt-5"),i(e,"action","https://members.thejcr.co.uk/api/feedback/reveal"),i(e,"method","POST")},m(C,E){S(C,e,E),o(e,n),o(e,t),o(e,a),o(a,s),o(s,m),o(m,b),b.checked=r[1],o(m,_),o(e,g),o(e,l),o(l,f),o(f,k),o(k,P),D||(I=ce(b,"change",r[2]),D=!0)},p(C,[E]){E&1&&(n.value=C[0]),E&2&&(b.checked=C[1]),E&2&&O!==(O=!C[1])&&(k.disabled=O)},i:Y,o:Y,d(C){C&&d(e),D=!1,I()}}}function Ae(r,e,n){let{encrypted:t}=e,a=!1;function s(){a=this.checked,n(1,a)}return r.$$set=m=>{"encrypted"in m&&n(0,t=m.encrypted)},[t,a,s]}class Be extends fe{constructor(e){super(),de(this,e,Ae,Oe,ue,{encrypted:0})}}function Ie(r){let e,n,t,a,s,m="Reveal Original Sender",b,_,g;return e=new Se({props:{subject:r[1],recipient:r[0],notify:r[2]}}),_=new Be({props:{encrypted:r[0]}}),{c(){Z(e.$$.fragment),n=j(),t=c("br"),a=j(),s=c("h2"),s.textContent=m,b=j(),Z(_.$$.fragment)},l(l){ee(e.$$.fragment,l),n=w(l),t=u(l,"BR",{}),a=w(l),s=u(l,"H2",{"data-svelte-h":!0}),X(s)!=="svelte-1i6669j"&&(s.textContent=m),b=w(l),ee(_.$$.fragment,l)},m(l,f){te(e,l,f),S(l,n,f),S(l,t,f),S(l,a,f),S(l,s,f),S(l,b,f),te(_,l,f),g=!0},p(l,f){const k={};f&2&&(k.subject=l[1]),f&1&&(k.recipient=l[0]),f&4&&(k.notify=l[2]),e.$set(k);const P={};f&1&&(P.encrypted=l[0]),_.$set(P)},i(l){g||(N(e.$$.fragment,l),N(_.$$.fragment,l),g=!0)},o(l){H(e.$$.fragment,l),H(_.$$.fragment,l),g=!1},d(l){l&&(d(n),d(t),d(a),d(s),d(b)),ae(e,l),ae(_,l)}}}function Ne(r){let e,n,t=r[0]&&r[1]&&Ie(r);return{c(){t&&t.c(),e=ke()},l(a){t&&t.l(a),e=ke()},m(a,s){t&&t.m(a,s),S(a,e,s),n=!0},p(a,s){a[0]&&a[1]?t?(t.p(a,s),s&3&&N(t,1)):(t=Ie(a),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(Te(),H(t,1,1,()=>{t=null}),De())},i(a){n||(N(t),n=!0)},o(a){H(t),n=!1},d(a){a&&d(e),t&&t.d(a)}}}function Ue(r){let e,n;return e=new Le({props:{$$slots:{default:[Ne]},$$scope:{ctx:r}}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),n=!0},p(t,a){const s={};a&15&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Fe(r){let e,n;return e=new Re({props:{current:"/get-involved/feedback/respond",title:"Feedback Response",size:"small",metaDescription:"",$$slots:{default:[Ue]},$$scope:{ctx:r}}}),{c(){Z(e.$$.fragment)},l(t){ee(e.$$.fragment,t)},m(t,a){te(e,t,a),n=!0},p(t,[a]){const s={};a&15&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){H(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Me(r,e,n){let t,a,s;return we(()=>{const m=new URLSearchParams(document.location.search);n(0,t=m.get("recipient")),n(1,a=m.get("subject")),n(2,s=m.getAll("notify"))}),[t,a,s]}class qe extends fe{constructor(e){super(),de(this,e,Me,Fe,ue,{})}}export{qe as component};
